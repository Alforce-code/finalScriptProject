<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MUBAS Grading System</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body {margin:0;font-family:Arial,sans-serif;background:#f5f7fa;color:#333;}
.header {background:#003366;color:#fff;padding:10px 20px;display:flex;align-items:center;justify-content:space-between;}
.header .logo {display:flex;align-items:center;}
.header .logo img {height:40px;margin-right:10px;}
.header .user-info {display:flex;align-items:center;gap:10px;}
.header .user-info img {width:40px;height:40px;border-radius:50%;border:2px solid #fff;}
.navbar {background:#004c99;overflow-x:auto;}
.navbar ul {display:flex;list-style:none;margin:0;padding:0;}
.navbar li {padding:12px 20px;color:#fff;cursor:pointer;}
.navbar li:hover,.navbar li.active {background:#0059b3;}
.dashboard {display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;padding:20px;}
.card {background:#fff;border-radius:8px;padding:15px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.card h3 {margin:0 0 10px;font-size:16px;color:#555;}
.card .value {font-size:20px;font-weight:bold;}
.card-blue {border-left:5px solid #007bff;}
.card-red {border-left:5px solid #d9534f;}
.card-green {border-left:5px solid #5cb85c;}
.quick-links {background:#fff;margin:0 20px 20px;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.quick-links a {margin-right:20px;font-weight:bold;}
.content {display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;padding:20px;}
.section {background:#fff;border-radius:8px;padding:15px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.section h4 {margin:0 0 10px;color:#555;}
.table {width:100%;border-collapse:collapse;margin-top:10px;}
.table tr {border-bottom:1px solid #eee;}
.table td, .table th {padding:8px;text-align:left;}
.notice {margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #eee;}
.notice .date {color:#d9534f;font-size:12px;margin-bottom:4px;}
.notice b {display:block;}
.footer {background:#003366;color:#fff;text-align:center;padding:10px;margin-top:20px;font-size:14px;}
</style>
</head>
<body>

<!-- Header -->
<div class="header">
  <div class="logo">
    <img src="/images/mubas_logo.png" alt="Logo">
    <span>MUBAS GRADING SYSTEM</span>
  </div>
  <div class="user-info">
    <span style="color:#05d72f;">
      Welcome <%= student.first_name %> <%= student.last_name %>
    </span>
    <img src="<%= student.photo || '/images/default-avatar.png' %>" alt="Avatar">
  </div>
</div>

<!-- Navbar -->
<div class="navbar">
  <ul>
    <li class="active"><a href="/student/dashboard" style="text-decoration:none;color:white;"><i class="fas fa-user-circle"></i> Dashboard</a></li>
    <li><a href="/student/profile" style="text-decoration:none;color:white;"><i class="fas fa-book"></i> Profile</a></li>
    <li><a href="/student/grades" style="text-decoration:none;color:white;"><i class="fas fa-book"></i> All Grades</a></li>
    <li><a href="/logout" style="margin-left:10px;font-size:20px;color:red;text-decoration:none;"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
  </ul>
</div>

<!-- Dashboard Cards -->
<div class="dashboard">
  <div class="card card-blue">
    <h3>Account Balance</h3>
    <div class="value">MK<%= student.balance || 0 %></div>
  </div>
  <div class="card card-red">
    <h3>Program / Class</h3>
    <div class="value"><%= student.program || "N/A" %></div>
    <div>Class ID: <%= student.class_id || "N/A" %></div>
  </div>
  <div class="card card-green">
    <h3>Registration Status</h3>
    <div class="value" style="color:#05d72f;">Open</div>
  </div>
</div>

<!-- Quick Links -->
<div class="quick-links">
  <a href="/student/grades" style="text-decoration:none;"><i class="fas fa-info-circle"></i> Examination results available</a>
</div>

<!-- Content Sections -->
<div class="content">

  <!-- Modules to attend (Current Semester Only) -->
  <div class="section">
    <h4><i class="fas fa-book"></i> Modules to attend - Semester 2</h4>
    <% if (modules && modules.length > 0) { %>
      <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Module Name</th>
          </tr>
        </thead>
        <tbody>
          <% modules.forEach((m, i) => { %>
            <tr>
              <td><%= i + 1 %></td>
              <td><%= m.module_name %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } else { %>
      <p>No registered modules for this semester.</p>
    <% } %>
  </div>

      <!-- Events Section -->
      <div class="section">
        <h4><i class="fas fa-calendar-alt"></i> Events - Semester 2</h4>
        <p>No current events available.</p>
      </div>


</div>

<div class="footer">
  &copy; <%= new Date().getFullYear() %> MUBAS. All rights reserved.
</div>

</body>
</html>
