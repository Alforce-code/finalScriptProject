<%- include('../partials/header', {title: 'Reset Password'}) %>
            <div class="auth-container">
                <div class="auth-card">
                    <h2>Reset Password</h2>
                    
                    <% if (error) { %>
                        <div class="alert alert-error">
                            <%= error %>
                        </div>
                    <% } %>
                    
                    <% if (success) { %>
                        <div class="alert alert-success">
                            <%= success %>
                        </div>
                    <% } %>
                    
                    <form action="/auth/reset-password" method="POST">
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" class="form-control" required 
                                   value="<%= email || '' %>">
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <input type="password" id="newPassword" name="newPassword" class="form-control" required 
                                   minlength="6" placeholder="Minimum 6 characters">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">Confirm New Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required>
                        </div>
                        
                        <button type="submit" class="btn" style="width: 100%;">Reset Password</button>
                    </form>
                    
                    <div style="text-align: center; margin-top: 1rem;">
                        <a href="/auth/login">Back to Login</a>
                    </div>
                </div>
            </div>
            
            <script>
                // Client-side password validation
                document.getElementById('confirmPassword').addEventListener('input', function() {
                    const newPassword = document.getElementById('newPassword').value;
                    const confirmPassword = this.value;
                    const button = document.querySelector('button[type="submit"]');
                    
                    if (newPassword !== confirmPassword && confirmPassword.length > 0) {
                        this.style.borderColor = '#e74c3c';
                        button.disabled = true;
                    } else {
                        this.style.borderColor = '#ddd';
                        button.disabled = false;
                    }
                });
                
                // Password strength indicator
                document.getElementById('newPassword').addEventListener('input', function() {
                    const password = this.value;
                    const strengthIndicator = document.getElementById('passwordStrength');
                    
                    if (!strengthIndicator) {
                        // Create strength indicator if it doesn't exist
                        const indicator = document.createElement('div');
                        indicator.id = 'passwordStrength';
                        indicator.style.marginTop = '5px';
                        indicator.style.fontSize = '12px';
                        this.parentNode.appendChild(indicator);
                    }
                    
                    const strength = checkPasswordStrength(password);
                    const indicator = document.getElementById('passwordStrength');
                    indicator.innerHTML = `Strength: <span style="color: ${strength.color}">${strength.text}</span>`;
                });
                
                function checkPasswordStrength(password) {
                    let strength = 0;
                    
                    if (password.length >= 6) strength++;
                    if (password.length >= 8) strength++;
                    if (/[A-Z]/.test(password)) strength++;
                    if (/[0-9]/.test(password)) strength++;
                    if (/[^A-Za-z0-9]/.test(password)) strength++;
                    
                    if (strength <= 2) return { text: 'Weak', color: '#e74c3c' };
                    if (strength <= 4) return { text: 'Medium', color: '#f39c12' };
                    return { text: 'Strong', color: '#27ae60' };
                }
            </script>
<%- include('../partials/footer') %>